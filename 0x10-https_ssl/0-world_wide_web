#!/usr/bin/env bash
# Displays DNS record info for subdomains of a domain

# Function to fetch and print record info
get_record_info() {
    local DOMAIN=$1
    local SUB=$2
    local FQDN="${SUB}.${DOMAIN}"

    RECORD_LINE=$(dig +short ${FQDN} | head -n1)

    if [[ -n "$RECORD_LINE" ]]; then
        echo "The subdomain ${SUB} is a A record and points to ${RECORD_LINE}"
    fi
}

# Main logic
domain=$1
subdomain=$2

if [ -z "$subdomain" ]; then
    for sub in www lb-01 web-01 web-02; do
        get_record_info $domain $sub
    done
else
    get_record_info $domain $subdomain
fi
